{% extends "base.html" %}

{% block title %}Super Admin Command Center - TekVwarho ProAudit{% endblock %}

{% block head %}
<style>
    /* Nigerian Flag Colors - Green White Green Theme */
    :root {
        --ng-green: #008751;
        --ng-green-dark: #006741;
        --ng-green-light: #00a865;
        --ng-white: #ffffff;
        --ng-green-pale: #e6f5ed;
        --ng-green-muted: #f0f9f4;
    }
    
    /* Override primary colors */
    .bg-ng-green { background-color: var(--ng-green) !important; }
    .bg-ng-green-dark { background-color: var(--ng-green-dark) !important; }
    .bg-ng-green-light { background-color: var(--ng-green-light) !important; }
    .bg-ng-green-pale { background-color: var(--ng-green-pale) !important; }
    .text-ng-green { color: var(--ng-green) !important; }
    .border-ng-green { border-color: var(--ng-green) !important; }
    
    /* Sidebar Navigation */
    .admin-sidebar {
        width: 280px;
        background: linear-gradient(180deg, var(--ng-green-dark) 0%, var(--ng-green) 100%);
        min-height: 100vh;
        position: fixed;
        left: 0;
        top: 0;
        z-index: 40;
        transition: transform 0.3s ease;
    }
    
    .admin-sidebar .nav-link {
        color: rgba(255, 255, 255, 0.85);
        padding: 0.75rem 1.25rem;
        border-radius: 0.5rem;
        margin: 0.25rem 0.75rem;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }
    
    .admin-sidebar .nav-link:hover,
    .admin-sidebar .nav-link.active {
        background-color: rgba(255, 255, 255, 0.15);
        color: white;
    }
    
    .admin-sidebar .nav-link.active {
        background-color: rgba(255, 255, 255, 0.2);
        font-weight: 600;
    }
    
    .admin-sidebar .nav-section {
        color: rgba(255, 255, 255, 0.5);
        font-size: 0.7rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        padding: 1rem 1.25rem 0.5rem;
        margin-top: 0.5rem;
    }
    
    /* Main Content Area */
    .admin-main {
        margin-left: 280px;
        min-height: 100vh;
        background-color: #f8fafb;
    }
    
    /* Top Header Bar */
    .admin-header {
        background: white;
        border-bottom: 1px solid #e5e7eb;
        padding: 1rem 2rem;
        position: sticky;
        top: 0;
        z-index: 30;
    }
    
    /* Metric Cards */
    .metric-card {
        background: white;
        border-radius: 1rem;
        padding: 1.5rem;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        border: 1px solid #e5e7eb;
        transition: all 0.2s ease;
    }
    
    .metric-card:hover {
        box-shadow: 0 4px 12px rgba(0, 135, 81, 0.1);
        border-color: var(--ng-green-light);
    }
    
    .metric-card.highlight {
        background: linear-gradient(135deg, var(--ng-green) 0%, var(--ng-green-dark) 100%);
        color: white;
    }
    
    .metric-card.highlight .metric-label {
        color: rgba(255, 255, 255, 0.8);
    }
    
    .metric-value {
        font-size: 2rem;
        font-weight: 700;
        line-height: 1.2;
    }
    
    .metric-label {
        font-size: 0.875rem;
        color: #6b7280;
        font-weight: 500;
    }
    
    .metric-trend {
        font-size: 0.75rem;
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }
    
    .metric-trend.up { color: var(--ng-green); }
    .metric-trend.down { color: #ef4444; }
    
    /* Section Headers */
    .section-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 1rem;
        padding-bottom: 0.75rem;
        border-bottom: 2px solid var(--ng-green-pale);
    }
    
    .section-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: #111827;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .section-title svg {
        color: var(--ng-green);
    }
    
    /* Data Tables */
    .data-grid {
        background: white;
        border-radius: 1rem;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        border: 1px solid #e5e7eb;
    }
    
    .data-grid table {
        width: 100%;
        border-collapse: collapse;
    }
    
    .data-grid th {
        background: var(--ng-green-pale);
        color: var(--ng-green-dark);
        font-weight: 600;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        padding: 0.875rem 1rem;
        text-align: left;
        border-bottom: 1px solid #e5e7eb;
    }
    
    .data-grid td {
        padding: 1rem;
        font-size: 0.875rem;
        border-bottom: 1px solid #f3f4f6;
    }
    
    .data-grid tr:hover td {
        background-color: var(--ng-green-muted);
    }
    
    /* Status Badges */
    .status-badge {
        display: inline-flex;
        align-items: center;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
    }
    
    .status-badge.active { background: #dcfce7; color: #166534; }
    .status-badge.trial { background: #dbeafe; color: #1e40af; }
    .status-badge.suspended { background: #fee2e2; color: #991b1b; }
    .status-badge.grace { background: #fef3c7; color: #92400e; }
    .status-badge.healthy { background: #dcfce7; color: #166534; }
    .status-badge.warning { background: #fef3c7; color: #92400e; }
    .status-badge.critical { background: #fee2e2; color: #991b1b; }
    
    /* Action Buttons */
    .btn-action {
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
        transition: all 0.2s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .btn-action.primary {
        background: var(--ng-green);
        color: white;
    }
    
    .btn-action.primary:hover {
        background: var(--ng-green-dark);
    }
    
    .btn-action.secondary {
        background: white;
        color: var(--ng-green);
        border: 1px solid var(--ng-green);
    }
    
    .btn-action.secondary:hover {
        background: var(--ng-green-pale);
    }
    
    /* Quick Action Cards */
    .quick-action {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 0.75rem;
        padding: 1.25rem;
        text-align: center;
        transition: all 0.2s ease;
        cursor: pointer;
        text-decoration: none;
        display: block;
    }
    
    .quick-action:hover {
        border-color: var(--ng-green);
        box-shadow: 0 4px 12px rgba(0, 135, 81, 0.15);
        transform: translateY(-2px);
    }
    
    .quick-action-icon {
        width: 48px;
        height: 48px;
        background: var(--ng-green-pale);
        color: var(--ng-green);
        border-radius: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 0.75rem;
    }
    
    /* Health Indicator */
    .health-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 0.5rem;
    }
    
    .health-indicator.healthy { background: #22c55e; box-shadow: 0 0 8px rgba(34, 197, 94, 0.5); }
    .health-indicator.warning { background: #f59e0b; box-shadow: 0 0 8px rgba(245, 158, 11, 0.5); }
    .health-indicator.critical { background: #ef4444; box-shadow: 0 0 8px rgba(239, 68, 68, 0.5); }
    
    /* Charts Container */
    .chart-container {
        background: white;
        border-radius: 1rem;
        padding: 1.5rem;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        border: 1px solid #e5e7eb;
    }
    
    /* Tabs */
    .tab-nav {
        display: flex;
        gap: 0.25rem;
        background: #f3f4f6;
        padding: 0.25rem;
        border-radius: 0.5rem;
        margin-bottom: 1.5rem;
    }
    
    .tab-nav button {
        padding: 0.5rem 1rem;
        border-radius: 0.375rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: #6b7280;
        background: transparent;
        border: none;
        cursor: pointer;
        transition: all 0.2s ease;
    }
    
    .tab-nav button.active {
        background: white;
        color: var(--ng-green);
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }
    
    /* Progress Bars */
    .progress-bar {
        height: 8px;
        background: #e5e7eb;
        border-radius: 4px;
        overflow: hidden;
    }
    
    .progress-bar .fill {
        height: 100%;
        background: var(--ng-green);
        border-radius: 4px;
        transition: width 0.3s ease;
    }
    
    /* Responsive */
    @media (max-width: 1024px) {
        .admin-sidebar {
            transform: translateX(-100%);
        }
        .admin-sidebar.open {
            transform: translateX(0);
        }
        .admin-main {
            margin-left: 0;
        }
    }
</style>
{% endblock %}

{% block nav %}{% endblock %}

{% block content %}
<div x-data="superAdminDashboard()" x-init="init()" class="flex min-h-screen">
    <!-- Sidebar Navigation -->
    <aside class="admin-sidebar" :class="{ 'open': sidebarOpen }">
        <!-- Logo -->
        <div class="p-6 border-b border-white/10">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-content-center overflow-hidden">
                    <img src="/static/images/logo.jpg" alt="Logo" class="w-full h-full object-cover">
                </div>
                <div>
                    <div class="text-white font-bold text-lg">TekVwarho</div>
                    <div class="text-white/60 text-xs">Super Admin</div>
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <nav class="py-4 overflow-y-auto" style="height: calc(100vh - 100px);">
            <div class="nav-section">Overview</div>
            <a href="#overview" @click.prevent="activeSection = 'overview'" :class="{ 'active': activeSection === 'overview' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                Executive Dashboard
            </a>
            
            <div class="nav-section">Tenant Management</div>
            <a href="#tenants" @click.prevent="activeSection = 'tenants'" :class="{ 'active': activeSection === 'tenants' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
                Tenant Registry
            </a>
            <a href="#subscriptions" @click.prevent="activeSection = 'subscriptions'" :class="{ 'active': activeSection === 'subscriptions' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/></svg>
                Subscriptions
            </a>
            <a href="#feature-flags" @click.prevent="activeSection = 'feature-flags'" :class="{ 'active': activeSection === 'feature-flags' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"/></svg>
                Feature Flags
            </a>
            
            <div class="nav-section">Compliance</div>
            <a href="#audit-logs" @click.prevent="activeSection = 'audit-logs'" :class="{ 'active': activeSection === 'audit-logs' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                Audit Logs
            </a>
            <a href="#compliance" @click.prevent="activeSection = 'compliance'" :class="{ 'active': activeSection === 'compliance' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                Compliance Dashboard
            </a>
            <a href="#legal-holds" @click.prevent="activeSection = 'legal-holds'" :class="{ 'active': activeSection === 'legal-holds' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
                Legal Holds
            </a>
            
            <div class="nav-section">Intelligence</div>
            <a href="#ml-jobs" @click.prevent="activeSection = 'ml-jobs'" :class="{ 'active': activeSection === 'ml-jobs' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                ML Jobs Monitor
            </a>
            <a href="#models" @click.prevent="activeSection = 'models'" :class="{ 'active': activeSection === 'models' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/></svg>
                Model Registry
            </a>
            <a href="#risk-signals" @click.prevent="activeSection = 'risk-signals'" :class="{ 'active': activeSection === 'risk-signals' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                Risk Signals
            </a>
            
            <div class="nav-section">Revenue</div>
            <a href="#revenue" @click.prevent="activeSection = 'revenue'" :class="{ 'active': activeSection === 'revenue' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                Revenue Analytics
            </a>
            <a href="#upsell" @click.prevent="activeSection = 'upsell'" :class="{ 'active': activeSection === 'upsell' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
                Upsell Signals
            </a>
            
            <div class="nav-section">Operations</div>
            <a href="#infrastructure" @click.prevent="activeSection = 'infrastructure'" :class="{ 'active': activeSection === 'infrastructure' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"/></svg>
                Infrastructure
            </a>
            <a href="#support" @click.prevent="activeSection = 'support'" :class="{ 'active': activeSection === 'support' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
                Support Queue
            </a>
            
            <div class="nav-section">Administration</div>
            <a href="#admin-users" @click.prevent="activeSection = 'admin-users'" :class="{ 'active': activeSection === 'admin-users' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
                Staff Management
            </a>
            <a href="#security" @click.prevent="activeSection = 'security'" :class="{ 'active': activeSection === 'security' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
                Security Dashboard
            </a>
            <a href="#settings" @click.prevent="activeSection = 'settings'" :class="{ 'active': activeSection === 'settings' }" class="nav-link">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                Global Settings
            </a>
        </nav>
        
        <!-- User Profile -->
        <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-white/10">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white font-bold">
                    {{ dashboard.user.name[:2] | upper if dashboard.user.name else 'SA' }}
                </div>
                <div class="flex-1 min-w-0">
                    <div class="text-white font-medium text-sm truncate">{{ dashboard.user.name or 'Super Admin' }}</div>
                    <div class="text-white/60 text-xs truncate">{{ dashboard.user.email }}</div>
                </div>
                <a href="/logout" class="text-white/60 hover:text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg>
                </a>
            </div>
        </div>
    </aside>
    
    <!-- Main Content -->
    <main class="admin-main flex-1">
        <!-- Top Header -->
        <header class="admin-header flex items-center justify-between">
            <div class="flex items-center gap-4">
                <button @click="sidebarOpen = !sidebarOpen" class="lg:hidden p-2 rounded-lg hover:bg-gray-100">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
                </button>
                <div>
                    <h1 class="text-xl font-bold text-gray-900" x-text="sectionTitles[activeSection]">Executive Dashboard</h1>
                    <p class="text-sm text-gray-500">Platform Command Center</p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <!-- System Health Quick View -->
                <div class="flex items-center gap-2 px-3 py-1.5 bg-green-50 rounded-lg border border-green-200">
                    <span class="health-indicator healthy"></span>
                    <span class="text-sm font-medium text-green-700">All Systems Operational</span>
                </div>
                <!-- Notifications -->
                <button class="relative p-2 rounded-lg hover:bg-gray-100">
                    <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/></svg>
                    <span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full" x-show="alertCount > 0"></span>
                </button>
                <!-- Quick Search -->
                <div class="relative">
                    <input type="text" placeholder="Search tenants, users..." class="w-64 pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-green-500">
                    <svg class="w-5 h-5 text-gray-400 absolute left-3 top-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                </div>
            </div>
        </header>
        
        <!-- Content Area -->
        <div class="p-6">
            <!-- Section: Executive Overview (Default) -->
            <div x-show="activeSection === 'overview'" x-transition>
                {% include 'partials/super_admin/overview.html' %}
            </div>
            
            <!-- Section: Tenant Registry -->
            <div x-show="activeSection === 'tenants'" x-transition x-cloak>
                {% include 'partials/super_admin/tenants.html' %}
            </div>
            
            <!-- Section: Subscriptions -->
            <div x-show="activeSection === 'subscriptions'" x-transition x-cloak>
                {% include 'partials/super_admin/subscriptions.html' %}
            </div>
            
            <!-- Section: Feature Flags -->
            <div x-show="activeSection === 'feature-flags'" x-transition x-cloak>
                {% include 'partials/super_admin/feature_flags.html' %}
            </div>
            
            <!-- Section: Audit Logs -->
            <div x-show="activeSection === 'audit-logs'" x-transition x-cloak>
                {% include 'partials/super_admin/audit_logs.html' %}
            </div>
            
            <!-- Section: Compliance Dashboard -->
            <div x-show="activeSection === 'compliance'" x-transition x-cloak>
                {% include 'partials/super_admin/compliance.html' %}
            </div>
            
            <!-- Section: Legal Holds -->
            <div x-show="activeSection === 'legal-holds'" x-transition x-cloak>
                {% include 'partials/super_admin/legal_holds.html' %}
            </div>
            
            <!-- Section: ML Jobs -->
            <div x-show="activeSection === 'ml-jobs'" x-transition x-cloak>
                {% include 'partials/super_admin/ml_jobs.html' %}
            </div>
            
            <!-- Section: Model Registry -->
            <div x-show="activeSection === 'models'" x-transition x-cloak>
                {% include 'partials/super_admin/models.html' %}
            </div>
            
            <!-- Section: Risk Signals -->
            <div x-show="activeSection === 'risk-signals'" x-transition x-cloak>
                {% include 'partials/super_admin/risk_signals.html' %}
            </div>
            
            <!-- Section: Revenue Analytics -->
            <div x-show="activeSection === 'revenue'" x-transition x-cloak>
                {% include 'partials/super_admin/revenue.html' %}
            </div>
            
            <!-- Section: Upsell Signals -->
            <div x-show="activeSection === 'upsell'" x-transition x-cloak>
                {% include 'partials/super_admin/upsell.html' %}
            </div>
            
            <!-- Section: Infrastructure -->
            <div x-show="activeSection === 'infrastructure'" x-transition x-cloak>
                {% include 'partials/super_admin/infrastructure.html' %}
            </div>
            
            <!-- Section: Support Queue -->
            <div x-show="activeSection === 'support'" x-transition x-cloak>
                {% include 'partials/super_admin/support.html' %}
            </div>
            
            <!-- Section: Staff Management -->
            <div x-show="activeSection === 'admin-users'" x-transition x-cloak>
                {% include 'partials/super_admin/staff_management.html' %}
            </div>
            
            <!-- Section: Security Dashboard -->
            <div x-show="activeSection === 'security'" x-transition x-cloak>
                {% include 'partials/super_admin/security.html' %}
            </div>
            
            <!-- Section: Global Settings -->
            <div x-show="activeSection === 'settings'" x-transition x-cloak>
                {% include 'partials/super_admin/settings.html' %}
            </div>
        </div>
    </main>
</div>

<script>
function superAdminDashboard() {
    return {
        sidebarOpen: false,
        activeSection: 'overview',
        alertCount: {{ dashboard.security_alerts | length if dashboard.security_alerts else 0 }},
        loading: false,
        
        sectionTitles: {
            'overview': 'Executive Dashboard',
            'tenants': 'Tenant Registry',
            'subscriptions': 'Subscription Management',
            'feature-flags': 'Feature Flag Control',
            'audit-logs': 'Global Audit Logs',
            'compliance': 'Compliance Dashboard',
            'legal-holds': 'Legal Holds',
            'ml-jobs': 'ML Jobs Monitor',
            'models': 'Model Registry',
            'risk-signals': 'Risk Detection',
            'revenue': 'Revenue Analytics',
            'upsell': 'Upsell Opportunities',
            'infrastructure': 'Infrastructure Health',
            'support': 'Support Queue',
            'admin-users': 'Staff Management',
            'security': 'Security Dashboard',
            'settings': 'Global Settings'
        },
        
        init() {
            // Check URL hash for initial section
            const hash = window.location.hash.replace('#', '');
            if (hash && this.sectionTitles[hash]) {
                this.activeSection = hash;
            }
            
            // Listen for hash changes
            window.addEventListener('hashchange', () => {
                const newHash = window.location.hash.replace('#', '');
                if (newHash && this.sectionTitles[newHash]) {
                    this.activeSection = newHash;
                }
            });
        },
        
        async refreshData() {
            this.loading = true;
            try {
                const response = await fetch('/api/v1/staff/dashboard');
                if (response.ok) {
                    const data = await response.json();
                    // Update dashboard data
                    console.log('Dashboard refreshed', data);
                }
            } catch (error) {
                console.error('Failed to refresh dashboard', error);
            } finally {
                this.loading = false;
            }
        }
    }
}
</script>
{% endblock %}
